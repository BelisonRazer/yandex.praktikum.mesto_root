Добрый день! Не получилось реализовать подмену http\https в зависимости от сборки..
При коде ниже всегда запрос шел от else (http) даже в продакшен сборке, из-за чего на github.pages были ошибки "нужно делать запрос с https"
Пока что изменил все пути вручную на https, чтобы работало :) 
Просьба подсказать, что я сделал не так?

//package.json
"scripts": {
    "build": "NODE_ENV=production rimraf dist && webpack --mode production",
    "dev": "NODE_ENV=development webpack-dev-server --mode development --open --watch"
    "deploy": "gh-pages -d dist"
  },



//config
new webpack.DefinePlugin({
    'NODE_ENV': "'process.env.NODE_ENV'"
}),



//code
let url;

if (NODE_ENV === 'production') {
    url = 'https://95.216.175.5/cohort1';
} else {
    url = 'http://95.216.175.5/cohort1';
}

const api = new Api({
    baseUrl: url,
    headers: {
        authorization: '5827babf-da13-436e-bf42-aaef7271e4d6',
        'Content-Type': 'application/json'
    }
});